import{_ as p,o as l,c as u,a as t,w as V,d as c,v as f,b as h,p as _,e as b,t as a,n as E,F as v,r as w,f as G,g as D,C,h as g,i as y,L as O}from"./index-274747c1.js";const I={props:{document:{type:Object,required:!0}},data(){return{show:!1,editedDocument:{}}},methods:{open(){this.editedDocument={...this.document},this.show=!0},close(){this.show=!1},closeOnOverlayClick(o){o.target===o.currentTarget&&this.close()},cancel(){this.close()},submit(){this.$emit("document-edited",this.editedDocument),this.close()}}},r=o=>(_("data-v-6a2cdf86"),o=o(),b(),o),F={class:"edit-dialog"},U=r(()=>t("h2",null,"Edit Document",-1)),j=r(()=>t("label",{for:"guid"},"GUID:",-1)),B=r(()=>t("label",{for:"title"},"Title:",-1)),M=r(()=>t("label",{for:"content"},"Content:",-1)),T=r(()=>t("label",{for:"tags"},"Tags:",-1)),L=r(()=>t("label",{for:"version"},"Version:",-1)),N={class:"edit-dialog-actions"},q=r(()=>t("button",{type:"submit"},"Save",-1));function z(o,e,d,s,i,m){return i.show?(l(),u("div",{key:0,class:"edit-dialog-overlay",onClick:e[7]||(e[7]=n=>m.closeOnOverlayClick(n))},[t("div",F,[U,t("form",{onSubmit:e[6]||(e[6]=V((...n)=>m.submit&&m.submit(...n),["prevent"]))},[j,c(t("input",{type:"text",id:"guid","onUpdate:modelValue":e[0]||(e[0]=n=>i.editedDocument.guid=n)},null,512),[[f,i.editedDocument.guid]]),B,c(t("input",{type:"text",id:"title","onUpdate:modelValue":e[1]||(e[1]=n=>i.editedDocument.title=n)},null,512),[[f,i.editedDocument.title]]),M,c(t("textarea",{id:"content","onUpdate:modelValue":e[2]||(e[2]=n=>i.editedDocument.content=n)},null,512),[[f,i.editedDocument.content]]),T,c(t("input",{type:"text",id:"tags","onUpdate:modelValue":e[3]||(e[3]=n=>i.editedDocument.tags=n)},null,512),[[f,i.editedDocument.tags]]),L,c(t("input",{type:"text",id:"version","onUpdate:modelValue":e[4]||(e[4]=n=>i.editedDocument.version=n)},null,512),[[f,i.editedDocument.version]]),t("div",N,[t("button",{type:"button",onClick:e[5]||(e[5]=(...n)=>m.cancel&&m.cancel(...n))},"Cancel"),q])],32)])])):h("",!0)}const $=p(I,[["render",z],["__scopeId","data-v-6a2cdf86"]]);const k=o=>(_("data-v-8ceb4e0a"),o=o(),b(),o),A={class:"document-container"},H={class:"document"},J=["title"],K=["title"],P=k(()=>t("i",{class:"fa-solid fa-tag tag-icon"},null,-1)),Q={key:0,class:"tag-list"},R=["title"],W=k(()=>t("div",{class:"actions"},[t("span",{class:"loadContent"},[t("i",{class:"fa-solid fa-file"})])],-1)),X={class:"documentContent"},Y={class:"document-actions"},Z={props:{document:{type:Object,required:!0}},data(){return{loading:!1,loadedDocument:null,hover:!1,showContent:!1}},components:{ConfirmDialog:C,EditDocumentDialog:$},methods:{async loadContent(o){if(!this.loading)try{this.loading=!0,this.loadedDocument=(await g.get(`folders/${this.folderGuid}/${o}`)).data,this.showContent=!this.showContent}catch{alert("Server was unable to load document.")}finally{this.loading=!1}},getDocument(o){return this.loadedDocument&&this.loadedDocument.guid===o?this.loadedDocument.content:null},async confirmDelete(){if(await this.$refs.confirmDialog.open())try{await g.delete(`documents/${this.document.guid}`),this.$emit("document-deleted",this.document.guid)}catch{alert("Error deleting the document")}},async editDocument(){this.$refs.editDialog.open()}},computed:{folderGuid(){return this.$route.params.id},versionStyle(){return this.document.tags.length>0?{}:{flexGrow:1}}}},x=Object.assign(Z,{__name:"DocumentComponent",setup(o){return(e,d)=>(l(),u(v,null,[t("div",A,[t("div",H,[t("div",{class:"documentsHeader",onClick:d[2]||(d[2]=s=>e.loadContent(o.document.guid))},[t("div",{class:"title",title:o.document.title},a(o.document.title),9,J),t("div",{class:"version",title:o.document.version,style:E(e.versionStyle)}," v."+a(o.document.version),13,K),o.document.tags.length>0&&!e.show?(l(),u("div",{key:0,class:"tags",onMouseover:d[0]||(d[0]=s=>e.hover=!0),onMouseleave:d[1]||(d[1]=s=>e.hover=!1)},[P,e.hover?(l(),u("div",Q,[t("ul",null,[(l(!0),u(v,null,w(o.document.tags,s=>(l(),u("li",{key:s},a(s),1))),128))])])):h("",!0)],32)):h("",!0),t("div",{class:"type",title:o.document.type},"."+a(o.document.type),9,R),W]),t("div",X,[c(t("div",null,a(e.getDocument(o.document.guid)),513),[[G,e.showContent]])])]),t("div",Y,[t("button",{class:"edit-button",onClick:d[3]||(d[3]=(...s)=>e.editDocument&&e.editDocument(...s))},"Edit"),t("button",{class:"delete-button",onClick:d[4]||(d[4]=(...s)=>e.confirmDelete&&e.confirmDelete(...s))},"Delete")])]),D(C,{ref:"confirmDialog",title:"Delete Document",message:"Are you sure you want to delete this document?"},null,512),D($,{ref:"editDialog",document:o.document,onDocumentEdited:e.updateDocument},null,8,["document","onDocumentEdited"])],64))}}),S=p(x,[["__scopeId","data-v-8ceb4e0a"]]),ee={class:"folderView"},te={class:"folders"},oe={key:0,class:"documents"},ne={components:{DocumentComponent:S},data(){return{folder:{},loading:!1}},methods:{async loadFolder(){this.loading=!0;try{this.folder=(await g.get(`folders/${this.folderGuid}`)).data}catch{alert("Server was unable to load folder.")}finally{this.loading=!1}}},async mounted(){this.loadFolder(),this.loading=!0;try{this.folder=(await g.get(`folders/${this.folderGuid}`)).data}catch{alert("Server was unable to load folder.")}finally{this.loading=!1}},computed:{folderGuid(){return this.$route.params.id}}},de=Object.assign(ne,{__name:"FolderView",setup(o){return(e,d)=>(l(),u("div",ee,[e.loading?(l(),y(O,{key:0})):h("",!0),t("h1",null,a(e.folder.name),1),t("div",te,[t("h4",null,"guid: "+a(e.folderGuid),1),e.folder.documents?(l(),u("div",oe,[(l(!0),u(v,null,w(e.folder.documents,s=>(l(),y(S,{key:s.guid,document:s,onDocumentDeleted:e.loadFolder},null,8,["document","onDocumentDeleted"]))),128))])):h("",!0)])]))}});export{de as default};
