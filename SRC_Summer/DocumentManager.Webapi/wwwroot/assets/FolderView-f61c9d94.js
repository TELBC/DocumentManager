import{_ as g,o as n,c as l,a as o,t as d,b as u,r as w,w as f,n as C,F as m,d as _,v as k,e as S,f as y,p as $,g as b,h,L as N}from"./index-9c472cfe.js";const O={props:{title:String,message:String},data(){return{show:!1,resolve:null}},methods:{closeOnOverlayClick(t){t.target===t.currentTarget&&this.cancel()},open(){return this.show=!0,new Promise(t=>{this.resolve=t})},close(){this.show=!1},confirm(){this.resolve(!0),this.close()},cancel(){this.resolve(!1),this.close()}}},G={class:"confirm-dialog"},E={class:"confirm-dialog-actions"};function I(t,e,s,a,i,r){return i.show?(n(),l("div",{key:0,class:"confirm-dialog-overlay",onClick:e[2]||(e[2]=c=>r.closeOnOverlayClick(c))},[o("div",G,[o("h2",null,d(s.title),1),o("p",null,d(s.message),1),o("div",E,[o("button",{onClick:e[0]||(e[0]=(...c)=>r.cancel&&r.cancel(...c))},"Cancel"),o("button",{onClick:e[1]||(e[1]=(...c)=>r.confirm&&r.confirm(...c))},"Confirm")])])])):u("",!0)}const T=g(O,[["render",I],["__scopeId","data-v-cd8e035d"]]);const p=t=>($("data-v-4957655e"),t=t(),b(),t),V={class:"document-container"},B={class:"document"},F=["title"],j=["title"],L=p(()=>o("i",{class:"fa-solid fa-tag tag-icon"},null,-1)),M={key:0,class:"tag-list"},q=["title"],z=p(()=>o("div",{class:"actions"},[o("span",{class:"loadContent"},[o("i",{class:"fa-solid fa-file"})])],-1)),A={class:"documentContent"},H={class:"document-actions"},P={props:{document:{type:Object,required:!0}},data(){return{loading:!1,loadedDocument:null,hover:!1,showContent:!1}},methods:{async loadContent(t){if(!this.loading)try{this.loading=!0,this.loadedDocument=(await y.get(`folders/${this.folderGuid}/${t}`)).data,this.showContent=!this.showContent}catch{alert("Server was unable to load document.")}finally{this.loading=!1}},getDocument(t){return this.loadedDocument&&this.loadedDocument.guid===t?this.loadedDocument.content:null},async confirmDelete(){await this.$refs.confirmDialog.open()}},directives:{"trim-whitespace":U},computed:{folderGuid(){return this.$route.params.id},versionStyle(){return this.document.tags.length>0?{}:{flexGrow:1}}}};function v(t){for(let e of t.childNodes)e.nodeType===Node.TEXT_NODE&&e.data.trim()===""&&e.remove()}var U={inserted:v,componentUpdated:v};const W=Object.assign(P,{__name:"DocumentComponent",setup(t){return(e,s)=>{const a=w("trim-whitespace");return n(),l(m,null,[o("div",V,[o("div",B,[f((n(),l("div",{class:"documentsHeader",onClick:s[2]||(s[2]=i=>e.loadContent(t.document.guid))},[o("div",{class:"title",title:t.document.title},d(t.document.title),9,F),o("div",{class:"version",title:t.document.version,style:C(e.versionStyle)}," v."+d(t.document.version),13,j),t.document.tags.length>0?(n(),l("div",{key:0,class:"tags",onMouseover:s[0]||(s[0]=i=>e.hover=!0),onMouseleave:s[1]||(s[1]=i=>e.hover=!1)},[L,e.hover?(n(),l("div",M,[o("ul",null,[(n(!0),l(m,null,_(t.document.tags,i=>(n(),l("li",{key:i},d(i),1))),128))])])):u("",!0)],32)):u("",!0),o("div",{class:"type",title:t.document.type},"."+d(t.document.type),9,q),z])),[[a]]),o("div",A,[f(o("div",null,d(e.getDocument(t.document.guid)),513),[[k,e.showContent]])])]),o("div",H,[o("button",{class:"edit-button",onClick:s[3]||(s[3]=(...i)=>e.editDocument&&e.editDocument(...i))},"Edit"),o("button",{class:"delete-button",onClick:s[4]||(s[4]=(...i)=>e.confirmDelete&&e.confirmDelete(...i))},"Delete")])]),S(T,{ref:"confirmDialog",title:"Delete Document",message:"Are you sure you want to delete this document?"},null,512)],64)}}}),D=g(W,[["__scopeId","data-v-4957655e"]]),X={class:"folderView"},J={class:"folders"},K={key:0,class:"documents"},Q={components:{DocumentComponent:D},data(){return{folder:{},loading:!1}},async mounted(){this.loading=!0;try{this.folder=(await y.get(`folders/${this.folderGuid}`)).data}catch{alert("Server was unable to load folder.")}finally{this.loading=!1}},computed:{folderGuid(){return this.$route.params.id}}},Y=Object.assign(Q,{__name:"FolderView",setup(t){return(e,s)=>(n(),l("div",X,[e.loading?(n(),h(N,{key:0})):u("",!0),o("h1",null,"Folder "+d(e.folderGuid),1),o("div",J,[o("h3",null,"Name: "+d(e.folder.name),1),e.folder.documents?(n(),l("div",K,[(n(!0),l(m,null,_(e.folder.documents,a=>(n(),h(D,{key:a.guid,document:a},null,8,["document"]))),128))])):u("",!0)])]))}});export{Y as default};
